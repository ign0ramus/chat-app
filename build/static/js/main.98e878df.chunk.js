(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{35:function(e,t,a){e.exports=a(71)},65:function(e,t){},69:function(e,t,a){},71:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),c=a(32),r=a.n(c),o=a(1),i=a(2),l=a(4),m=a(3),u=a(5),h=a(33),E=a.n(h),f=function(e){var t=function(t,a){t?alert(t):e.setUser(a)};return s.a.createElement("div",{className:"container"},s.a.createElement("form",{className:"form",onSubmit:function(a){a.preventDefault();var n={name:a.target.querySelector("input").value,room:window.location.hash.slice(1)};e.socket.emit("VERIFY_USER",n,t)}},s.a.createElement("div",{className:"form__field"},s.a.createElement("h3",{className:"heading-3"},"Join Chat")),s.a.createElement("div",{className:"form__field"},s.a.createElement("label",{className:"form__label",htmlFor:"nickname"},"Nickname"),s.a.createElement("input",{className:"form__input",type:"text",id:"nickname",placeholder:"Enter your nickname",required:!0,autoFocus:!0})),s.a.createElement("div",{className:"form__field"},s.a.createElement("button",{className:"form__button button"},"Join"))))},d=a(13),_=a.n(d),v=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(m.a)(t).call(this,e))).state={users:[]},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.socket.on("UPDATE_USERS_LIST",function(t){e.setState({users:t})})}},{key:"render",value:function(){var e=this.state.users.map(function(e){return s.a.createElement("li",{className:"users__user",key:_()()},e)});return s.a.createElement("div",{className:"sidebar"},s.a.createElement("input",{id:"users-online",type:"checkbox",className:"sidebar__checkbox"}),s.a.createElement("label",{className:"sidebar__header",htmlFor:"users-online"},"Users online"),s.a.createElement("div",{className:"sidebar__users users"},s.a.createElement("ul",{className:"users__list"},e)))}}]),t}(n.Component),p=a(34),b=a.n(p),k=function(e){return s.a.createElement("li",{className:"chat__message"},s.a.createElement("div",{className:"chat__message-title"},s.a.createElement("h4",{className:"heading-4"},e.name),s.a.createElement("span",{className:"span--dark"},e.time)),s.a.createElement("div",{className:"chat__message-body"},s.a.createElement("p",{className:"text"},e.text)))},N=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(m.a)(t).call(this,e))).scrollToBottom=function(){var e=document.getElementById("msgs"),t=e.lastElementChild,a=t.previousElementSibling,n=e.clientHeight,s=e.scrollTop,c=e.scrollHeight;n+s+t.clientHeight+(a?a.clientHeight:0)>=c&&(e.scrollTop=c)},a.state={messages:[]},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentWillMount",value:function(){var e=this;this.props.socket.on("NEW_MESSAGE",function(t){t.time=b()(t.time).format("HH:mm");var a=e.state.messages.slice();a.push(t),e.setState({messages:a}),e.scrollToBottom()})}},{key:"render",value:function(){var e=this.state.messages.map(function(e){return s.a.createElement(k,{name:e.name||"",time:e.time,text:e.text,key:_()()})});return s.a.createElement("ol",{className:"chat__messages",id:"msgs"},e)}}]),t}(n.Component),g=function(e){var t=e.user,a=e.socket;return window.location.hash=t.room,s.a.createElement("div",{className:"container"},s.a.createElement(v,{socket:a,user:t}),s.a.createElement("div",{className:"chat"},s.a.createElement(N,{socket:a}),s.a.createElement("div",{className:"chat__footer"},s.a.createElement("form",{className:"chat__form",onSubmit:function(t){t.preventDefault();var a=t.target.querySelector("input"),n=a.value;e.socket.emit("CREATE_MESSAGE",n,function(){a.value=""})}},s.a.createElement("input",{className:"chat__input",type:"text",placeholder:"Message",autoFocus:!0}),s.a.createElement("button",{className:"chat__button button"},"Send")))))},O="/",S=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(m.a)(t).call(this,e))).initSocket=function(){var e=E()(O);a.setState({socket:e})},a.setUser=function(e){a.state.socket.emit("USER_CONNECTED",e),a.setState({user:e})},a.state={socket:null,user:null},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentWillMount",value:function(){this.initSocket()}},{key:"render",value:function(){return this.state.user?s.a.createElement(g,{socket:this.state.socket,user:this.state.user}):s.a.createElement(f,{socket:this.state.socket,setUser:this.setUser})}}]),t}(n.Component),j=(a(69),function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return s.a.createElement(S,null)}}]),t}(n.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(s.a.createElement(j,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[35,2,1]]]);
//# sourceMappingURL=main.98e878df.chunk.js.map